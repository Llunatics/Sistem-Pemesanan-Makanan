{% extends 'orders/header.html' %} 
{% load custom_tags %} 
{% load humanize %} 
{% block content %}

<div class="container-fluid">
    <div class="content my-3 px-4">
        <div class="card shadow rounded-0">
            <div class="card-body">
                <div class="row justify-content-center">
                    {% if user.is_superuser %}
                    <fieldset class="pb-2 mb-3 border w-100">
                        <legend class="px-3 w-auto ml-3">Instruksi:</legend>
                        <ul>
                            <li>Klik pada Baris Pesanan <small><i>(Baris Berwarna Merah)</i></small> untuk menandai sebagai sudah dikirim</li>
                        </ul>
                    </fieldset>
                    {% else %}
                    <h2> Daftar Pesanan </h2>
                    {% endif %}

                    <table class="table" id="order-tbl">
                        <thead class="thead-light">
                            <tr>
                                <th scope="col">ID Pesanan</th>
                                <th scope="col">Dipesan oleh</th>
                                <th scope="col">Tanggal</th>
                                <th scope="col">Pesanan</th>
                                <th scope="col">Jumlah yang Dibayar</th>
                            </tr>
                        </thead>
                        <tbody id="orders_table">
                            {% for row in rows %} 
                                {% if row.delivered %}
                                    <tr class="table-success">
                                {% else %}
                                    <tr class="table-danger mark-as-complete">
                                {% endif %}
                                    <td>{{row.id}}</td>
                                    <td>{{row.username}}</td>
                                    <td>{{row.time_of_order}}</td>
                                    <td>
                                        <ul>
                                            {% for item in row.order|format_cart %}
                                                <li>{{item|format_cart_item}}</li>
                                            {% endfor %}
                                        </ul>
                                    </td>
                                    <td>Rp. {{row.price|floatformat:2|intcomma}}</td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>

{% endblock %}
